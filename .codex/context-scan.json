{
  "timestamp": "2025-12-05T01:45:14Z",
  "scope": "Config Foup 动态图表布局",
  "locations": [
    "src/voc_app/gui/qml/views/config/ConfigFoupPage.qml",
    "src/voc_app/gui/qml/components/ChartCard.qml"
  ],
  "current_state": {
    "layout_logic": "ScrollView 内 ColumnLayout，Repeater 将通道分组为每页最多 4 个，GridLayout 两列铺排。1/2 张卡片占满列高，3 张时首卡跨两列占 55% 高，其余各占 45% 高，4 张时各占半高。每页高度取 scrollView 高度或 480 的较大值。",
    "data_source": "foupAcquisition 提供 channelCount、标题、单位、限值等；chartEntry 允许从 chartListModel 取系列配置。",
    "paging_behavior": "charts 分页，每页最多 4 个，ColumnLayout 垂直堆叠多页，scroll 纵向滚动，单页高度等于可视区。",
    "styles": "ChartCard 组件提供卡片样式与图表绘制，默认 Layout.preferredHeight 220，但在页面中被覆盖。"
  },
  "similar_components": [
    {
      "file": "src/voc_app/gui/qml/views/DataLogView.qml",
      "note": "chartsGrid/zoomChartCard 使用 ChartCard，布局和放大切换可参考高度与填充处理。"
    },
    {
      "file": "src/voc_app/gui/qml/views/StatusView.qml",
      "note": "Repeater 直接堆叠 ChartCard，示例了基本填充和标题区样式。"
    },
    {
      "file": "src/voc_app/gui/qml/components/ChartCard.qml",
      "note": "核心图表组件，定义 Layout 属性、半径、颜色与轴线设置。"
    }
  ],
  "tests": {
    "existing": [
      "tests/test_serial_device.py"
    ],
    "gaps": "未发现针对 GUI/QML 的自动化测试，布局修改需手动或运行应用验证。"
  },
  "observations": [
    "现有逻辑按每 4 个分页，且高度规则与需求不完全匹配，需要重写布局算法。",
    "需支持单数时首卡跨两列，其余按两列排布，并处理超过 4 个时滚动和高度折半要求。",
    "需确认滚动区域高度与首屏高度的关系，避免无限增长。"
  ]
}
