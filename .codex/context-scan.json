{
  "timestamp": "2025-11-30T19:29:14+08:00",
  "taskScope": "为 FOUP 数据采集添加可配置 IP（带默认值）并在界面提供文本输入框实时调整",
  "locations": {
    "foupAcquisitionController": {
      "file": "src/voc_app/gui/foup_acquisition.py",
      "role": "管理 FOUP 采集 TCP 连接，默认 host=192.168.1.8、port=65432，控制 start/stop 与数据分发",
      "notes": "host 仅作为构造参数存入 _host，未暴露 Property/Setter；SocketCommunicator 连接时使用 _host/_port"
    },
    "guiAppEntry": {
      "file": "src/voc_app/gui/app.py",
      "role": "PySide6 入口，创建 FoupAcquisitionController 并通过 setContextProperty 暴露为 foupAcquisition 给 QML",
      "notes": "FOUP 曲线预建 8 路 SeriesTableModel 并注入 chartListModel，当前未传入可变 host 参数"
    },
    "configViewFoup": {
      "file": "src/voc_app/gui/qml/views/ConfigView.qml",
      "role": "Config 子页面 foupComponent 展示采集状态、通道数量与实时曲线，无通信参数输入控件",
      "notes": "状态文案绑定 foupAcquisition.statusMessage/channelCount/lastValue；仅显示，不可编辑 IP"
    },
    "configFoupCommands": {
      "file": "src/voc_app/gui/qml/commands/Config_foupCommands.qml",
      "role": "FOUP 采集命令面板，含开始采集/停止采集按钮与状态文本",
      "notes": "未提供 host 输入或保存逻辑；按钮直接调用 foupAcquisition.startAcquisition/stopAcquisition"
    },
    "textFieldPatterns": {
      "file": "src/voc_app/gui/qml/components/LoginDialog.qml",
      "role": "示例 TextField 样式（表面色、边框、占位符颜色），可复用到配置输入",
      "notes": "采用 UiTheme.color/spacing，便于保持风格一致"
    }
  },
  "techStack": {
    "ui": "QtQuick/QtQuick.Controls QML 前端，CommandPanel+InformationPanel 分离命令与视图，组件库自带 CustomButton/ChartCard/SubNavigationBar",
    "backend": "PySide6 QQmlApplicationEngine 注入 context 对象，FoupAcquisitionController 使用 threading+SocketCommunicator 拉取 TCP 数据",
    "dataFlow": "ChartDataListModel/SeriesTableModel 提供曲线模型，foupAcquisition 通过信号 dataPointReceived.append_point 更新多通道曲线"
  },
  "tests": {
    "unit": {
      "command": "PYTHONPATH=src python3 -m unittest tests/test_serial_device.py",
      "status": "仅串口模块单测，未覆盖 GUI/Foup 采集"
    },
    "gui": {
      "status": "未运行；历史记录表明 PySide6 可能缺失，需注意无法冒烟测试"
    }
  },
  "observationReport": {
    "gaps": [
      "FOUP 采集 IP 硬编码，QML 无法查看或修改；更换目标设备需改代码",
      "FoupAcquisition 未暴露 host Property/Setter，UI 无法绑定默认值或保存输入",
      "GUI 层无测试覆盖，网络交互缺少可配置性与验证步骤"
    ],
    "nextSteps": [
      "在 FoupAcquisitionController 暴露 host Property 和 setter（含默认值），确保 QML 可读写",
      "在 Config FOUP 面板增加 TextField 或输入区域显示默认 IP 并允许修改，变更后用于后续连接",
      "补充文档/日志记录如何验证，若测试受 PySide6 限制需在 verification.md 标注风险"
    ]
  }
}
