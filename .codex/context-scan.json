{
  "timestamp": "2025-12-11T03:10:58Z",
  "scope": "高速刷新频谱图集成可行性快速扫描",
  "locations": [
    "src/voc_app/gui/foup_acquisition.py",
    "src/voc_app/gui/csv_model.py",
    "src/voc_app/gui/qml/components/ChartCard.qml",
    "src/voc_app/gui/qml/views/StatusView.qml",
    "src/voc_app/gui/app.py",
    "docs/server.c"
  ],
  "current_state": {
    "data_ingest": "FoupAcquisitionController 使用 SocketCommunicator 读取 4 字节长度前缀 + UTF-8 文本，_handle_line 解析逗号分隔浮点值并立即通过 dataPointReceived 信号把每个通道的单点追加到对应 SeriesTableModel；时间戳在本地生成。",
    "buffer_render": "SeriesTableModel 保存最近 max_rows（app.py 创建时为 60）条 [ts, value]，溢出时移除首行并重算边界；ChartCard.qml 通过 VXYModelMapper 将 model 映射到 LineSeries/ScatterSeries，boundsChanged 时重新计算轴和 OOC/OOS/Target 参考线，useOpenGL 处于注释状态。",
    "ui_usage": "StatusView.qml 将 FOUP/Loadport 通道以 GridLayout + ChartCard 显示，FOUP 最多 8 通道，每个卡片独立更新；示例定时器 data_update_timer 仅以 1s 间隔生成随机点演示低频刷新。",
    "protocol_samples": "docs/server.c 展示的示例服务器使用相同长度前缀协议，侧重 run/get 文件/目录，不包含批量波形推流。"
  },
  "similar_components": [
    {
      "file": "src/voc_app/gui/csv_model.py",
      "note": "CsvFileManager + CsvDataModel 支持从磁盘 CSV 读取静态 dataPoints 并喂给 ChartCard，用于离线曲线而非实时高频波形。"
    },
    {
      "file": "src/voc_app/gui/qml_socket_client_bridge.py",
      "note": "向 QML 暴露 runShell/getFile 能力，可复用现有协议下载日志，但同样是离线文件，不是流式波形。"
    }
  ],
  "tests": {
    "existing": [
      "tests/test_serial_device.py"
    ],
    "gaps": "无覆盖采集链、Chart 渲染或高频数据吞吐；未见性能/压力测试。"
  },
  "observations": [
    "当前数据源每条消息仅包含单个时间点的浮点值（可多通道），缺少频谱所需的高采样窗口或原始波形，且时间戳由客户端生成，无法反推稳定采样率。",
    "SeriesTableModel 以列表保存并在溢出时 pop(0) + 重算边界，max_rows=60 会在高频下快速丢弃数据，且每条信号都会触发 QAbstractTableModel 事件，CPU 压力大。",
    "ChartCard 基于 QtCharts 折线绘制，频繁调用 updateAxesFromSeries/updateLimitLines 重建多条参考线，未启用 GPU 加速，难以支撑高刷新频谱渲染（二维纹理/Shader 更合适）。",
    "UI 布局为多 ChartCard 并行刷新，通道越多开销线性放大，缺少批量更新或降采样机制。"
  ]
}
