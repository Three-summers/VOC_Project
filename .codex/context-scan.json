{
  "timestamp": "2025-11-25T14:33:37+08:00",
  "taskScope": "Config -> FOUP 采集流程：命令按钮拆分、QML -> Python 信号、Socket 采集、折线图显示",
  "locations": {
    "configView": {
      "file": "src/voc_app/gui/qml/views/ConfigView.qml",
      "role": "Config 页主视图，loadport/foup 两个子视图，FOUP 区域包含采集状态与一个占位矩形",
      "notes": "目前 foupInfo 为静态数据；采集面板仅展示文本 '采集通道示意(稍后接入)'"
    },
    "foupCommands": {
      "file": "src/voc_app/gui/qml/commands/Config_foupCommands.qml",
      "role": "命令面板按钮；现包含 '控制采集' 按钮直接调用 clientBridge.connectSocket 并 ls -al",
      "notes": "需要拆为开始/停止按钮并调用主程序新接口"
    },
    "chartModels": {
      "files": ["src/voc_app/gui/app.py", "src/voc_app/gui/csv_model.py"],
      "role": "ChartDataListModel + SeriesTableModel + ChartDataGenerator 提供 StatusView 实时曲线",
      "notes": "app.py 默认生成 4 条随机数据并暴露 chartListModel；FOUP/Loadport 通过索引访问"
    },
    "statusView": {
      "file": "src/voc_app/gui/qml/views/StatusView.qml",
      "role": "示例 ChartCard 使用 chartListModel，提供 chartEntry() 工具，可复用"
    },
    "clientBridge": {
      "files": ["src/voc_app/gui/qml_socket_client_bridge.py", "src/voc_app/gui/socket_client.py"],
      "role": "QML 调 socket 客户端的桥接类；可复用通信工具，但新需求更偏向在主程序管理连接"
    }
  },
  "techStack": {
    "python": "PySide6 QObject + threading + socket，用于采集控制",
    "qml": "QtQuick.Controls + ChartView，ChartCard 利用 VXYModelMapper",
    "dataFlow": "ChartDataListModel -> ChartCard，SeriesTableModel 提供 append_point(slot)"
  },
  "tests": {
    "unit": {
      "command": "PYTHONPATH=src python3 -m unittest tests/test_serial_device.py",
      "status": "pass (2025-11-25)"
    },
    "gui": {
      "command": "PYTHONPATH=src QT_QPA_PLATFORM=offscreen python3 -m voc_app.gui.app",
      "status": "blocked (缺少 PySide6)"
    }
  },
  "observationReport": {
    "gaps": [
      "Config FOUP 区没有实际采集图；命令按钮直接调用 clientBridge，缺乏 start/stop 状态",
      "chartListModel 全部使用随机生成器，需为 FOUP channel 绑定真实数据",
      "需要设计 Python 控制器负责连接 127.0.0.1:65432 并把数据推送到 SeriesTableModel"
    ],
    "nextSteps": [
      "新增 FoupAcquisitionController (QObject) 并暴露给 QML",
      "改造 ConfigView 的状态文案、采集通道 UI，使用 ChartCard",
      "拆分 Config_foupCommands.qml 按钮逻辑"
    ]
  }
}
